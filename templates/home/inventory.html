{% extends "base.html" %}

{% block body %}

    <h1>Inventory</h1>
    <table>
        <tr>
            <th>ID</th>
            <th>Item</th>
            <th>Sell in</th>
            <th>Quality</th>
            <th>Class</th>
        </tr>
        {% for item in inventory %}
        <tr>
            <td>{{ item['id']  }}</td>
            <td>{{ item['name'] }}</td>
            <td>{{ item['sell_in']  }}</td>
            <td>{{ item['quality']  }}</td>
            <td>{{ item['class_object']  }}</td>
        </tr>
        {% endfor %}
    </table>

    <button id="updateButton" type="submit">Update all items</button>
    
    <a href="/inventory/create"><button type="submit">Create new item</button></a>
    <a href="/inventory/delete"><button type="submit">Delete item</button></a>
    <a href="/"><button type="submit">Go back</button></a>
    
    <div id="output"></div>

    <script>
        $(document).ready(function() {
            $('#updateButton').click(function() {
                $.ajax({
                    url: '/inventory',
                    type: 'PUT',
                    complete: function(response) {
                        window.location.href = '/inventory/update';
                    }
                });
            });
        });
    </script>

{% endblock %}
